CREATE DATABASE bd_lista_tunombre;


CREATE TABLE USUARIO(
    NICKNAME VARCHAR(20),
    NOMBRE_APELLIDO VARCHAR(100) NOT NULL,
    EMAIL VARCHAR(50) NOT NULL,
    PASSWORD VARCHAR(10) NOT NULL,
    PRIMARY KEY(NICKNAME)
);


CREATE TABLE GENERO(
    ID INT AUTO_INCREMENT,
    DESCRIPCION VARCHAR(100) NOT NULL,
    PRIMARY KEY(ID)
);


CREATE TABLE CANCION(
    ID INT AUTO_INCREMENT,
    NOMBRE VARCHAR(100),
    AUTOR VARCHAR(100),
    NICKNAME VARCHAR(20),
    GENERO_ID INT,
    PRIMARY KEY(ID)
);

ALTER TABLE CANCION ADD CONSTRAINT fk_cancion_usuario
FOREIGN KEY(NICKNAME) REFERENCES USUARIO(NICKNAME);

ALTER TABLE CANCION ADD CONSTRAINT fk_cancion_genero
FOREIGN KEY(GENERO_ID) REFERENCES GENERO(ID);

CREATE TABLE LISTA_REPRODUCCION(
    ID INT AUTO_INCREMENT,
    DESCRIPCION VARCHAR(100),
    NICKNAME VARCHAR(20),
    PRIMARY KEY(ID)
);

ALTER TABLE LISTA_REPRODUCCION ADD CONSTRAINT fk_lista_usuario
FOREIGN KEY(NICKNAME) REFERENCES USUARIO(NICKNAME);


CREATE TABLE LISTA_CANCION(
    LISTA_ID INT,
    CANCION_ID INT
);

ALTER TABLE LISTA_CANCION ADD CONSTRAINT pk_lista_cacncion
PRIMARY KEY(LISTA_ID, CANCION_ID);

ALTER TABLE LISTA_CANCION ADD CONSTRAINT fk_listac_listar
FOREIGN KEY(LISTA_ID) REFERENCES LISTA_REPRODUCCION(ID);

ALTER TABLE LISTA_CANCION ADD CONSTRAINT fk_listac_cancion
FOREIGN KEY(CANCION_ID) REFERENCES CANCION(ID);


INSERT INTO USUARIO VALUES('sarito', 'César González', 'saritogonz@gmail.com', '000000');
INSERT INTO USUARIO VALUES('casper', 'Gabriela Duarte', 'gb707@gmail.com', '1234567');
insert into GENERO VALUES(default, 'ROCK');
INSERT INTO GENERO VALUES(DEFAULT, 'ELECTRONICA');
INSERT INTO GENERO VALUES(DEFAULT, 'POP');
INSERT INTO CANCION VALUES(DEFAULT, 'AMERICAN IDIOT', 'GREEN DAY', 'CESAR', 1);
INSERT INTO CANCION VALUES(DEFAULT, 'LEVITATING', 'DUA LIPA', 'CESAR', 3);
INSERT INTO CANCION VALUES(DEFAULT, 'WAKE ME UP', 'AVICII', 'CESAR', 2);